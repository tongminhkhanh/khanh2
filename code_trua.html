<!DOCTYPE html>

<html class="light" lang="vi">

<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/public/logo.png">
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Tin tức và Sự kiện - Trường Tiểu học Ít Ong</title>

    <!-- Google Search Console Verification -->
    <meta name="google-site-verification" content="Ox4ZF3TqJUtol9XU_L0IoeaDoMWJadlstnFngObxn5Q" />

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Trường Tiểu học Ít Ong - Mường La, Sơn La. Nơi ươm mầm tài năng và nhân cách. Cập nhật tin tức, hoạt động, sự kiện và thông báo mới nhất." />
    <meta name="keywords" content="Trường Tiểu học Ít Ong, Mường La, Sơn La, giáo dục tiểu học, thitong" />
    <meta name="author" content="Trường Tiểu học Ít Ong" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://thitong.io.vn/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://thitong.io.vn/" />
    <meta property="og:title" content="Trường Tiểu học Ít Ong - Tin tức và Sự kiện" />
    <meta property="og:description"
        content="Nơi ươm mầm tài năng và nhân cách. Cập nhật tin tức, hoạt động, sự kiện và thông báo mới nhất của nhà trường." />
    <meta property="og:image" content="https://thitong.io.vn/public/logo_school.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="vi_VN" />
    <meta property="og:site_name" content="Trường Tiểu học Ít Ong" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Trường Tiểu học Ít Ong - Tin tức và Sự kiện" />
    <meta name="twitter:description"
        content="Nơi ươm mầm tài năng và nhân cách. Cập nhật tin tức, hoạt động và sự kiện mới nhất." />
    <meta name="twitter:image" content="https://thitong.io.vn/public/logo_school.jpg" />
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;700;900&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />

    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://res.cloudinary.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="stylesheet" href="/public/styles.css">
    <!-- UI Enhancements -->
    <link rel="stylesheet" href="/public/ui-enhancements.css">

    <!-- Schema.org School Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "School",
      "name": "Trường Tiểu học Ít Ong",
      "url": "https://thitong.io.vn/",
      "logo": "https://thitong.io.vn/public/logo_school.jpg",
      "image": "https://thitong.io.vn/public/logo_school.jpg",
      "description": "Trường Tiểu học Ít Ong - Mường La, Sơn La. Nơi ươm mầm tài năng và nhân cách.",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Tiểu khu 1, xã Mường La",
        "addressLocality": "Mường La",
        "addressRegion": "Sơn La",
        "addressCountry": "VN"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+84-326-439-774",
        "email": "khanhtm.muongla@sonla.gov.vn",
        "contactType": "customer service"
      },
      "sameAs": [
        "https://thitong.io.vn"
      ]
    }
    </script>
    <style>
        .snowflake {
            position: fixed;
            top: -10px;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation-name: fall;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
            color: #FFFFFF;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display text-text-main dark:text-white antialiased flex flex-col min-h-screen overflow-x-hidden">
    <!-- Enhanced TopNavBar - Professional Blue Theme -->
    <header id="main-header"
        class="sticky top-0 z-50 backdrop-blur-md border-b border-blue-400/30 dark:border-blue-900/50 shadow-lg transition-all duration-300 blue-header">
        <div class="px-4 lg:px-10 py-3 flex items-center justify-between max-w-[1440px] mx-auto w-full transition-all duration-300"
            id="header-inner">
            <!-- Logo & Brand -->
            <div class="flex items-center gap-8">
                <a href="/" class="flex items-center gap-3 text-text-main dark:text-white group">
                    <div class="relative">
                        <img src="/public/logo_school.jpg" alt="Logo Truong Tieu hoc It Ong"
                            class="h-10 w-10 rounded-full object-cover ring-2 ring-primary/20 group-hover:ring-primary/50 transition-all duration-300"
                            loading="lazy"
                            onerror="this.onerror=null; this.src='https://ui-avatars.com/api/?name=IT+ONG&background=2b8cee&color=fff&size=40&rounded=true'">
                        <span
                            class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"></span>
                    </div>
                    <div class="hidden md:block">
                        <h2
                            class="text-lg font-bold leading-tight tracking-[-0.015em] group-hover:text-primary transition-colors">
                            Trường Tiểu học Ít Ong</h2>
                        <p class="text-xs text-text-secondary dark:text-gray-400">Mường La, Sơn La</p>
                    </div>
                </a>

                <!-- Main Navigation -->
                <nav class="hidden lg:flex items-center gap-2" id="main-nav">
                    <a class="nav-link" href="/" data-page="home">Trang chủ</a>
                    <a class="nav-link" href="/gioi-thieu" data-page="about">Giới thiệu</a>
                    <a class="nav-link" href="/thong-bao" data-page="news">Thông báo</a>
                    <a class="nav-link" href="/hoat-dong" data-page="activities">Hoạt động</a>
                    <a class="nav-link" href="/thanh-tich" data-page="achievements">Thành tích</a>
                    <a class="nav-link" href="/su-kien" data-page="events">Sự kiện</a>
                    <a class="nav-link external" href="http://thitong.site" target="_blank">
                        Trợ lý AI
                        <span class="material-symbols-outlined text-xs ml-1">open_in_new</span>
                    </a>
                </nav>
            </div>

            <!-- Right Side: Search & Actions -->
            <div class="flex items-center gap-3">


                <!-- Admin Login Button -->
                <a href="/admin"
                    class="hidden md:flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 hover:bg-primary text-primary hover:text-white font-medium text-sm transition-all duration-300">
                    <span class="material-symbols-outlined text-lg">login</span>
                    <span>Đăng nhập</span>
                </a>

                <!-- Hamburger Menu Button (Mobile) -->
                <button
                    class="lg:hidden flex flex-col justify-center items-center w-10 h-10 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group"
                    onclick="openMobileMenu()" id="hamburger-btn">
                    <span class="hamburger-line top"></span>
                    <span class="hamburger-line middle"></span>
                    <span class="hamburger-line bottom"></span>
                </button>
            </div>
        </div>


    </header>
    <!-- Scrolling Ticker Bar -->
    <div id="ticker-bar" class="w-full border-b border-white/10 py-2.5 overflow-hidden">
        <div class="max-w-[1440px] mx-auto px-4 lg:px-10 flex items-center gap-6">
            <!-- Date & Time -->
            <div class="flex items-center gap-2 text-sm text-white/90 whitespace-nowrap border-r border-white/20 pr-4">
                <span class="material-symbols-outlined text-lg text-white/80">schedule</span>
                <span id="ticker-datetime">Đang tải...</span>
            </div>
            <!-- Scrolling Text Container -->
            <div id="ticker-content-container" class="flex-1 overflow-hidden relative h-6">
                <div id="ticker-content" class="absolute whitespace-nowrap text-sm font-bold text-white animate-ticker">
                    <!-- Content injected here -->
                </div>
            </div>
            <!-- Search Bar (Desktop) -->
            <div class="hidden md:block w-72 shrink-0">
                <div class="relative group">
                    <span
                        class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-white/60 text-base group-focus-within:text-white transition-colors">search</span>
                    <input type="text" id="nav-search" placeholder="Tìm kiếm bài viết..."
                        class="text-xs pl-10 pr-4 py-1.5 rounded-full border border-white/20 bg-white/10 text-white placeholder-white/60 focus:outline-none focus:bg-white/20 focus:border-white/40 focus:ring-2 focus:ring-white/10 w-full transition-all"
                        onkeypress="if(event.key==='Enter') searchArticles()">
                </div>
            </div>
            <!-- Search Toggle (Mobile) -->
            <button class="md:hidden p-1.5 rounded-lg hover:bg-white/10 transition-colors shrink-0"
                onclick="toggleMobileSearch()">
                <span class="material-symbols-outlined text-white/80">search</span>
            </button>
        </div>
        <!-- Mobile Search Input (Hidden by default) -->
        <div id="mobile-search-bar" class="hidden px-4 pb-2 pt-2 bg-blue-700/50 md:hidden">
            <div class="relative">
                <input type="text" id="nav-search-mobile" placeholder="Tìm kiếm..."
                    class="w-full text-sm pl-10 pr-4 py-2 rounded-full border border-white/20 bg-white/10 text-white placeholder-white/60 focus:outline-none focus:bg-white/20"
                    onkeypress="if(event.key==='Enter') searchArticles()">
                <span
                    class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-white/60 text-sm">search</span>
            </div>
        </div>
    </div>


    <style>
        /* ===== PROFESSIONAL BLUE NAVIGATION THEME ===== */
        /* Blue 500 (#3B82F6) → Blue 600 (#2563EB) → Blue 700 (#1D4ED8) */
        /* Tạo cảm giác tin cậy, an toàn và tập trung - phù hợp cho khu vực học tập */

        /* Subtle Shimmer Animation */
        @keyframes blueShimmer {
            0% {
                opacity: 0;
                transform: translateX(-100%);
            }

            50% {
                opacity: 0.3;
            }

            100% {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        @keyframes subtleGlow {

            0%,
            100% {
                box-shadow: 0 4px 20px rgba(59, 130, 246, 0.25);
            }

            50% {
                box-shadow: 0 6px 25px rgba(37, 99, 235, 0.35);
            }
        }

        /* Professional Blue Header Base */
        .blue-header {
            background: linear-gradient(135deg,
                    #3B82F6 0%,
                    /* Blue 500 */
                    #2563EB 40%,
                    /* Blue 600 */
                    #1D4ED8 70%,
                    /* Blue 700 */
                    #1E40AF 100%);
            /* Blue 800 */
            position: relative;
            overflow: hidden;
        }

        /* Subtle shimmer overlay */
        .blue-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg,
                    transparent 0%,
                    rgba(255, 255, 255, 0.15) 50%,
                    transparent 100%);
            animation: blueShimmer 10s ease-in-out infinite;
            pointer-events: none;
        }

        /* Subtle glow effect */
        .blue-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            animation: subtleGlow 5s ease-in-out infinite;
            pointer-events: none;
        }

        /* Dark mode header - deeper blue tones */
        .dark .blue-header {
            background: linear-gradient(135deg,
                    #1E3A5F 0%,
                    #1E3A8A 35%,
                    #172554 65%,
                    #0F172A 100%) !important;
        }

        .dark .blue-header::before {
            background: linear-gradient(90deg,
                    transparent 0%,
                    rgba(59, 130, 246, 0.1) 50%,
                    transparent 100%);
        }

        .dark .blue-header::after {
            animation: none;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.15);
        }

        /* Navigation Link Styles - Professional Blue */
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.5rem 0.875rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .dark .nav-link {
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            transform: translateY(-2px);
            box-shadow:
                0 4px 15px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .dark .nav-link:hover {
            background: rgba(59, 130, 246, 0.3);
            color: white;
            box-shadow:
                0 4px 15px rgba(59, 130, 246, 0.25);
        }

        .nav-link.active {
            background: transparent;
            color: #ffffff;
            box-shadow: none;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            transform: translateY(-1px);
            font-weight: 700;
        }

        .dark .nav-link.active {
            background: rgba(59, 130, 246, 0.9);
            color: white;
            box-shadow:
                0 4px 18px rgba(59, 130, 246, 0.4),
                0 0 25px rgba(59, 130, 246, 0.2);
        }

        .nav-link .nav-icon {
            font-size: 18px;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-link:hover .nav-icon {
            transform: scale(1.15) rotate(-5deg);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .nav-link.external {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-link.external:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        /* Login button professional blue style */
        #main-header a[href="/admin"] {
            background: rgba(255, 255, 255, 0.95) !important;
            color: #1D4ED8 !important;
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            font-weight: 600;
        }

        #main-header a[href="/admin"]:hover {
            background: white !important;
            color: #1E40AF !important;
            box-shadow:
                0 4px 18px rgba(0, 0, 0, 0.15),
                0 0 20px rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .dark #main-header a[href="/admin"] {
            background: rgba(59, 130, 246, 0.2) !important;
            color: white !important;
            border: 1px solid rgba(59, 130, 246, 0.4);
        }

        .dark #main-header a[href="/admin"]:hover {
            background: rgba(59, 130, 246, 0.4) !important;
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        /* Search bar professional blue style */
        #nav-search {
            background: rgba(255, 255, 255, 0.95) !important;
            border: 2px solid rgba(255, 255, 255, 0.3) !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        #nav-search:focus {
            background: white !important;
            border-color: rgba(255, 255, 255, 0.6) !important;
            box-shadow:
                0 0 0 3px rgba(255, 255, 255, 0.3),
                0 4px 15px rgba(0, 0, 0, 0.1);
        }

        #nav-search::placeholder {
            color: #6B7280;
        }

        .dark #nav-search {
            background: rgba(30, 58, 95, 0.9) !important;
            border-color: rgba(59, 130, 246, 0.3) !important;
        }

        .dark #nav-search:focus {
            border-color: rgba(59, 130, 246, 0.6) !important;
            box-shadow:
                0 0 0 3px rgba(59, 130, 246, 0.2),
                0 4px 12px rgba(59, 130, 246, 0.15);
        }

        /* Header scrolled state */
        #main-header.scrolled {
            box-shadow:
                0 8px 30px rgba(29, 78, 216, 0.3),
                0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .dark #main-header.scrolled {
            box-shadow:
                0 8px 30px rgba(59, 130, 246, 0.2),
                0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* Hamburger Menu Animation */
        .hamburger-line {
            width: 20px;
            height: 2px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .hamburger-line.top {
            transform: translateY(-6px);
        }

        .hamburger-line.bottom {
            transform: translateY(6px);
        }

        #hamburger-btn.active .hamburger-line.top {
            transform: translateY(0) rotate(45deg);
        }

        #hamburger-btn.active .hamburger-line.middle {
            opacity: 0;
            transform: scaleX(0);
        }

        #hamburger-btn.active .hamburger-line.bottom {
            transform: translateY(0) rotate(-45deg);
        }

        /* Header Shrink on Scroll */
        #main-header.scrolled #header-inner {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }

        #main-header.scrolled img {
            height: 2rem;
            width: 2rem;
        }

        /* Mobile search bar blue style */
        #nav-search-mobile {
            background: rgba(255, 255, 255, 0.95) !important;
            border-color: rgba(255, 255, 255, 0.3) !important;
        }

        #nav-search-mobile:focus {
            border-color: rgba(255, 255, 255, 0.6) !important;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
        }

        .dark #nav-search-mobile {
            background: rgba(30, 58, 95, 0.9) !important;
            border-color: rgba(59, 130, 246, 0.3) !important;
        }

        /* Brand text color adjustment for blue header */
        .blue-header .text-text-main,
        .blue-header h2,
        .blue-header p {
            color: white !important;
        }

        .blue-header .text-text-secondary,
        .blue-header .text-xs {
            color: rgba(255, 255, 255, 0.8) !important;
        }

        /* Search icon color */
        .blue-header .material-symbols-outlined.text-gray-400 {
            color: #6B7280 !important;
        }

        /* Mobile buttons color */
        .blue-header button .material-symbols-outlined {
            color: white !important;
        }

        /* Ticker Bar Styles */
        #ticker-bar {
            background: linear-gradient(135deg, #2563EB 0%, #1D4ED8 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .dark #ticker-bar {
            background: linear-gradient(135deg, #1E3A8A 0%, #0F172A 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        @keyframes ticker-scroll {
            0% {
                transform: translateX(100vw);
            }

            100% {
                transform: translateX(-100%);
            }
        }

        .animate-ticker {
            animation: ticker-scroll 25s linear infinite;
            padding-left: 20px;
        }

        #ticker-bar:hover .animate-ticker {
            animation-play-state: paused;
        }

        /* First line indent for paragraphs */
        p.indent-first-line {
            text-indent: 1.27cm;
        }
    </style>

    <script>
        // Active Navigation State
        function setActiveNav() {
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.nav-link[data-page]');

            navLinks.forEach(link => {
                link.classList.remove('active');
                const href = link.getAttribute('href');

                if (currentPath === '/' && href === '/') {
                    link.classList.add('active');
                } else if (href !== '/' && currentPath.startsWith(href)) {
                    link.classList.add('active');
                }
            });
        }

        // Header Shrink on Scroll
        function handleHeaderScroll() {
            const header = document.getElementById('main-header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        }

        // Toggle Mobile Search
        function toggleMobileSearch() {
            const searchBar = document.getElementById('mobile-search-bar');
            searchBar.classList.toggle('hidden');
            if (!searchBar.classList.contains('hidden')) {
                document.getElementById('nav-search-mobile').focus();
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            setActiveNav();
            window.addEventListener('scroll', handleHeaderScroll);
        });
    </script>
    <!-- Urgent Notice Bar -->
    <div id="urgent-notice-container" class="hidden w-full py-2">
        <div class="max-w-[1440px] mx-auto px-4 lg:px-10">
            <div
                class="bg-gradient-to-r from-red-600 to-red-500 text-white py-2.5 px-6 rounded-xl flex items-center justify-center gap-3 flex-wrap shadow-md">
                <span class="material-symbols-outlined text-xl animate-pulse">warning</span>
                <p id="urgent-notice-content" class="text-sm font-medium text-center"></p>
                <a id="urgent-notice-link" href="#"
                    class="hidden bg-white text-red-600 px-4 py-1 rounded-full text-sm font-bold hover:bg-red-100 transition-colors whitespace-nowrap">Xem
                    thêm</a>
            </div>
        </div>
    </div>
    <style>
        /* Skeleton Loading Animation */
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        .skeleton-shimmer {
            background: linear-gradient(90deg,
                    rgba(200, 200, 200, 0.2) 25%,
                    rgba(200, 200, 200, 0.5) 50%,
                    rgba(200, 200, 200, 0.2) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s ease-in-out infinite;
        }

        .dark .skeleton-shimmer {
            background: linear-gradient(90deg,
                    rgba(100, 100, 100, 0.2) 25%,
                    rgba(100, 100, 100, 0.5) 50%,
                    rgba(100, 100, 100, 0.2) 75%);
            background-size: 200% 100%;
        }

        /* Fade-in animation for loaded content */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        /* Hide load-more button while loading */
        #load-more-btn.loading-hidden {
            display: none !important;
        }

        /* ===== PAGE TRANSITIONS ===== */
        /* Fade-in effect when page loads */
        body {
            opacity: 0;
            animation: pageLoad 0.6s ease-out forwards;
        }

        @keyframes pageLoad {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Smooth page exit transition */
        body.page-exit {
            animation: pageExit 0.3s ease-in forwards;
        }

        @keyframes pageExit {
            from {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 0;
                transform: translateY(-10px);
            }
        }

        /* ===== ENHANCED BUTTON HOVER EFFECTS ===== */
        /* Primary buttons with gradient and lift effect */
        .btn-enhanced {
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-enhanced:hover::before {
            left: 100%;
        }

        .btn-enhanced:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(43, 140, 238, 0.35);
        }

        /* Newsletter button enhanced */
        #newsletter-form button {
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #newsletter-form button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        #newsletter-form button:hover::before {
            left: 100%;
        }

        #newsletter-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(43, 140, 238, 0.4);
        }

        /* Load more button enhanced */
        #load-more-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #load-more-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--primary, #2b8cee);
            color: var(--primary, #2b8cee);
        }

        /* ===== ENHANCED ARTICLE CARD HOVER EFFECTS ===== */
        /* Article cards with lift and glow effect */
        #news-grid article:not(.skeleton-card) {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #news-grid article:not(.skeleton-card):hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(43, 140, 238, 0.15), 0 8px 16px rgba(0, 0, 0, 0.08);
        }

        #news-grid article:not(.skeleton-card):hover img {
            transform: scale(1.1);
        }

        /* Category tag bounce on card hover */
        #news-grid article:not(.skeleton-card):hover span.bg-blue-100 {
            animation: tagBounce 0.5s ease;
        }

        @keyframes tagBounce {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        /* Featured section enhanced hover */
        #featured-main:hover img {
            transform: scale(1.08);
        }

        #featured-side-list>div {
            transition: all 0.3s ease;
            padding: 0.5rem;
            border-radius: 0.5rem;
        }

        #featured-side-list>div:hover {
            background: rgba(43, 140, 238, 0.05);
            transform: translateX(4px);
        }

        /* Sidebar widget cards hover */
        aside>div {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        aside>div:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        /* Quick links enhanced hover */
        .flex.items-center.gap-2.text-sm.text-text-secondary {
            transition: all 0.2s ease;
            padding: 0.25rem 0.5rem;
            margin: -0.25rem -0.5rem;
            border-radius: 0.375rem;
        }

        .flex.items-center.gap-2.text-sm.text-text-secondary:hover {
            background: rgba(43, 140, 238, 0.08);
            transform: translateX(4px);
        }

        /* ===== BACK TO TOP BUTTON ===== */
        #back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #2b8cee 0%, #1a6bb8 100%);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.8);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(43, 140, 238, 0.4);
        }

        #back-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        #back-to-top:hover {
            transform: translateY(-4px) scale(1.1);
            box-shadow: 0 8px 25px rgba(43, 140, 238, 0.5);
        }

        #back-to-top:active {
            transform: translateY(-2px) scale(1.05);
        }

        #back-to-top .material-symbols-outlined {
            font-size: 24px;
            transition: transform 0.3s ease;
        }

        #back-to-top:hover .material-symbols-outlined {
            animation: arrowBounce 0.6s ease infinite;
        }

        @keyframes arrowBounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-3px);
            }
        }

        /* ===== NAV LINK HOVER ENHANCEMENT ===== */
        header nav a {
            position: relative;
            transition: all 0.3s ease;
        }

        header nav a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #2b8cee, #1a6bb8);
            border-radius: 1px;
            transition: width 0.3s ease;
        }

        header nav a:hover::after {
            width: 100%;
        }

        /* ===== FOOTER LINK HOVER ===== */
        footer a {
            transition: all 0.2s ease;
        }

        footer a:hover {
            color: #2b8cee;
            transform: translateX(2px);
        }

        /* ===== EVENTS LIST ITEM HOVER ===== */
        #upcoming-events-list>div {
            transition: all 0.3s ease;
            padding: 0.5rem;
            border-radius: 0.5rem;
            margin: -0.5rem;
        }

        #upcoming-events-list>div:hover {
            background: rgba(43, 140, 238, 0.05);
            transform: translateX(4px);
        }

        /* ===== SMOOTH SCROLL BEHAVIOR ===== */
        html {
            scroll-behavior: smooth;
        }

        /* Vertical Scrolling Animation */
        @keyframes vertical-scroll {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(-50%);
            }
        }

        .news-scroller {
            animation: vertical-scroll 20s linear infinite;
        }

        .news-scroller:hover {
            animation-play-state: paused;
        }
    </style>
    <!-- Main Content -->
    <main class="flex-1 w-full max-w-[1440px] mx-auto px-4 lg:px-10 py-8 flex flex-col gap-10">
        <!-- Featured Section -->
        <section id="featured-section"
            class="hidden flex flex-col lg:flex-row gap-6 lg:gap-10 items-stretch bg-surface-light dark:bg-surface-dark rounded-xl p-4 lg:p-6 shadow-sm border border-[#cfdbe7] dark:border-gray-800">
            <!-- Main Featured Article (Left Column - 2/3) -->
            <div id="featured-main"
                class="w-full lg:w-3/5 relative group cursor-pointer overflow-hidden rounded-lg aspect-video lg:aspect-auto min-h-[300px]"
                onclick="">
                <img id="featured-main-bg" src="" alt="Featured Article"
                    class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                    loading="lazy">
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                <div class="absolute bottom-0 left-0 p-6 flex flex-col gap-2">
                    <span id="featured-main-category"
                        class="inline-flex items-center justify-center px-3 py-1 rounded-full bg-primary text-white text-xs font-bold w-fit mb-2">
                        Tiêu điểm
                    </span>
                    <h1 id="featured-main-title"
                        class="text-white text-2xl lg:text-3xl font-bold leading-tight drop-shadow-md">
                        <!-- Title -->
                    </h1>
                    <div class="flex items-center gap-2 text-gray-300 text-xs mt-1">
                        <span class="material-symbols-outlined text-sm">calendar_today</span>
                        <span id="featured-main-date"></span>
                    </div>
                    <a id="featured-main-link" href="#"
                        class="mt-2 inline-flex items-center gap-1 text-white text-sm font-bold hover:text-primary-light transition-colors">
                        Xem chi tiết <span class="material-symbols-outlined text-base">arrow_forward</span>
                    </a>
                </div>
            </div>

            <!-- Side Column (Right Column - 1/3) -->
            <div class="w-full lg:w-2/5 flex flex-col h-full">
                <div class="mb-4">
                    <h2 id="principal-message-title" class="text-text-main dark:text-white text-xl font-bold mb-2">
                        Thông điệp nhà trường</h2>
                    <div
                        class="text-text-secondary dark:text-gray-400 text-sm italic border-l-4 border-primary pl-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                        <p class="mb-1">“Học để biết, học để làm, học để chung sống, học để tự khẳng định mình”.</p>
                        <p>Rèn luyện đạo đức, kỹ năng sống, thái độ tích cực.</p>
                    </div>
                </div>

                <div class="text-xs text-red-500 font-bold mb-2 uppercase tracking-wide animate-pulse">
                    <span class="material-symbols-outlined text-sm align-bottom mr-1">breaking_news</span>
                    Tin nổi bật
                </div>

                <!-- Vertical Scrolling List Container -->
                <div class="flex-1 overflow-hidden relative rounded-lg border border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800/50 p-1"
                    style="max-height: 300px;">
                    <div id="featured-scroll-list" class="news-scroller flex flex-col gap-3 p-1">
                        <!-- Dynamic Articles will be injected here -->
                    </div>
                </div>

                <button onclick="window.location.href='/tin-tuc'"
                    class="mt-3 w-full text-center py-2 text-xs font-bold text-primary hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors uppercase tracking-wider">
                    Xem tất cả tin tức
                </button>
            </div>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <!-- Left Column: News Grid (8 cols) -->
            <div class="lg:col-span-8 flex flex-col gap-8">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-bold text-text-main dark:text-white flex items-center gap-2">
                        <span class="w-1 h-6 bg-primary rounded-full"></span>
                        Tin mới nhất
                    </h3>
                </div>

                <div id="news-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Skeleton Loading Cards -->
                    <article
                        class="skeleton-card flex flex-col bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden border border-[#cfdbe7] dark:border-gray-800 animate-pulse">
                        <div class="relative h-48 bg-gray-200 dark:bg-gray-700"></div>
                        <div class="p-5 flex flex-col flex-1">
                            <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-20 mb-3"></div>
                            <div class="h-5 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"></div>
                            <div class="h-5 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"></div>
                            <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"></div>
                            <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3 mb-4"></div>
                            <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"></div>
                        </div>
                    </article>
                    <article
                        class="skeleton-card flex flex-col bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden border border-[#cfdbe7] dark:border-gray-800 animate-pulse">
                        <div class="relative h-48 bg-gray-200 dark:bg-gray-700"></div>
                        <div class="p-5 flex flex-col flex-1">
                            <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-20 mb-3"></div>
                            <div class="h-5 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"></div>
                            <div class="h-5 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"></div>
                            <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"></div>
                            <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3 mb-4"></div>
                            <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"></div>
                        </div>
                    </article>
                </div>

                <div class="flex justify-center mt-4">
                    <button id="load-more-btn" onclick="loadMoreArticles()"
                        class="px-6 py-2 border border-[#cfdbe7] dark:border-gray-700 rounded-lg text-text-secondary dark:text-gray-300 font-medium hover:bg-white dark:hover:bg-gray-800 transition-colors">
                        Xem thêm tin cũ hơn
                    </button>
                </div>
            </div>

            <!-- Right Column: Sidebar (4 cols) -->
            <aside class="lg:col-span-4 flex flex-col gap-8">
                <!-- Upcoming Events Widget -->
                <div
                    class="bg-surface-light dark:bg-surface-dark rounded-xl p-5 border border-[#cfdbe7] dark:border-gray-800 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-text-main dark:text-white">Sự kiện sắp tới</h3>
                        <a class="text-xs text-primary font-bold hover:underline" href="/su-kien">Xem lịch</a>
                    </div>
                    <div id="upcoming-events-list" class="flex flex-col gap-4">
                        <p class="text-sm text-text-secondary dark:text-gray-400 text-center py-4">Đang tải sự kiện...
                        </p>
                    </div>
                </div>

                <!-- Newsletter Signup -->
                <div class="bg-primary/10 dark:bg-primary/5 rounded-xl p-6 border border-primary/20">
                    <div class="flex items-center gap-3 mb-3 text-primary">
                        <span class="material-symbols-outlined text-3xl">mark_email_unread</span>
                        <h3 class="text-lg font-bold text-text-main dark:text-white">Đăng ký bản tin</h3>
                    </div>
                    <p class="text-sm text-text-secondary dark:text-gray-300 mb-4">
                        Nhận thông báo mới nhất về hoạt động và sự kiện của trường qua email hàng tuần.
                    </p>
                    <form class="flex flex-col gap-3" id="newsletter-form">
                        <input
                            class="w-full h-10 px-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary focus:border-transparent outline-none"
                            id="newsletter-email" placeholder="Email của phụ huynh" type="email" required />
                        <button
                            class="w-full h-10 bg-primary hover:bg-primary-dark text-white text-sm font-bold rounded-lg transition-colors shadow-sm"
                            type="submit">
                            Đăng ký ngay
                        </button>
                    </form>
                </div>

                <!-- Quick Links -->
                <div
                    class="bg-surface-light dark:bg-surface-dark rounded-xl p-5 border border-[#cfdbe7] dark:border-gray-800 shadow-sm">
                    <h3 class="text-lg font-bold text-text-main dark:text-white mb-4">Liên kết nhanh</h3>
                    <ul class="flex flex-col gap-2">
                        <li>
                            <a class="flex items-center gap-2 text-sm text-text-secondary dark:text-gray-300 hover:text-primary transition-colors"
                                href="#">
                                <span class="material-symbols-outlined text-base">chevron_right</span>
                                Thời khóa biểu
                            </a>
                        </li>
                        <li>
                            <a class="flex items-center gap-2 text-sm text-text-secondary dark:text-gray-300 hover:text-primary transition-colors"
                                href="#">
                                <span class="material-symbols-outlined text-base">chevron_right</span>
                                Thư viện ảnh
                            </a>
                        </li>
                        <li>
                            <a class="flex items-center gap-2 text-sm text-text-secondary dark:text-gray-300 hover:text-primary transition-colors"
                                href="#">
                                <span class="material-symbols-outlined text-base">chevron_right</span>
                                Văn bản &amp; Biểu mẫu
                            </a>
                        </li>
                    </ul>
                </div>
            </aside>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-[#151f2b] border-t border-[#e7edf3] dark:border-gray-700 mt-auto">
        <div class="max-w-[1440px] mx-auto px-4 lg:px-10 py-10">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-1">
                    <div class="flex items-center gap-3 mb-4">
                        <img src="/public/logo_school.jpg" alt="Logo Trường Tiểu học Ít Ong"
                            class="h-12 w-12 rounded-full object-cover ring-2 ring-primary/30"
                            onerror="this.onerror=null; this.src='https://ui-avatars.com/api/?name=IT+ONG&background=2b8cee&color=fff&size=48&rounded=true'">
                        <span class="font-bold text-lg text-text-main dark:text-white">Trường Tiểu học Ít Ong</span>
                    </div>
                    <p class="text-sm text-text-secondary dark:text-gray-400">
                        Nơi ươm mầm tài năng và nhân cách, xây dựng nền tảng vững chắc cho tương lai.
                    </p>
                </div>
                <div>
                    <h4 class="font-bold text-text-main dark:text-white mb-4">Về Nhà Trường</h4>
                    <ul class="space-y-2 text-sm text-text-secondary dark:text-gray-400">
                        <li><a class="hover:text-primary" href="#">Lịch sử hình thành</a></li>
                        <li><a class="hover:text-primary" href="#">Đội ngũ giáo viên</a></li>
                        <li><a class="hover:text-primary" href="#">Cơ sở vật chất</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-text-main dark:text-white mb-4">Tuyển Sinh</h4>
                    <ul class="space-y-2 text-sm text-text-secondary dark:text-gray-400">
                        <li><a class="hover:text-primary" href="#">Thông báo tuyển sinh</a></li>
                        <li><a class="hover:text-primary" href="#">Hồ sơ nhập học</a></li>
                        <li><a class="hover:text-primary" href="#">Học phí &amp; Chính sách</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-text-main dark:text-white mb-4">Liên Hệ</h4>
                    <ul class="space-y-2 text-sm text-text-secondary dark:text-gray-400">
                        <li class="flex items-start gap-2">
                            <span class="material-symbols-outlined text-base mt-0.5">location_on</span>
                            Tiểu khu 1, xã Mường La, tỉnh Sơn La
                        </li>
                        <li class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-base">call</span>
                            (84) 326 439774
                        </li>
                        <li class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-base">mail</span>
                            khanhtm.muongla@sonla.gov.vn
                        </li>
                    </ul>
                    <!-- Google Maps -->
                    <div class="mt-4 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14790.5!2d104.082!3d21.555!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31350e5a1c6a0a5d%3A0x1c2e3f4a5b6c7d8e!2zw410IE9uZywgTcaw4budbmcgTGEsIFPGoW4gTGE!5e0!3m2!1svi!2s!4v1702900000000!5m2!1svi!2s"
                            width="100%" height="150" style="border:0;" allowfullscreen="" loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade" title="Bản đồ Trường Tiểu học Ít Ong">
                        </iframe>
                    </div>
                </div>
            </div>
            <div
                class="border-t border-[#e7edf3] dark:border-gray-700 mt-10 pt-6 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-xs text-text-secondary dark:text-gray-500">© 2025 Trường Tiểu học Ít Ong. All rights
                    reserved.</p>
                <div class="flex gap-4">
                    <a class="text-text-secondary dark:text-gray-400 hover:text-primary" href="#"><span
                            class="material-symbols-outlined">public</span></a>
                </div>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const newsGrid = document.getElementById('news-grid');

            // Fetch Urgent Notice
            try {
                const response = await fetch('/api/settings/urgent_notice');
                if (response.ok) {
                    const setting = await response.json();
                    const data = setting.value || {};

                    if (data.isEnabled) {
                        document.getElementById('urgent-notice-container').classList.remove('hidden');
                        document.getElementById('urgent-notice-content').innerText = data.content;

                        if (data.link) {
                            const linkBtn = document.getElementById('urgent-notice-link');
                            linkBtn.classList.remove('hidden');
                            linkBtn.onclick = () => window.location.href = data.link;
                        }
                    }
                }
            } catch (error) {
                console.error('Error fetching urgent notice:', error);
            }

            // Fetch Principal Message
            try {
                const response = await fetch('/api/settings/principal_message');
                if (response.ok) {
                    const setting = await response.json();
                    const data = setting.value || {};
                    if (data.title) document.getElementById('principal-message-title').innerText = data.title;
                }
            } catch (error) {
                console.error('Error fetching principal message:', error);
            }

            // Fetch Articles & Populate Sections
            try {
                const response = await fetch('/api/articles');
                const articles = await response.json();

                if (articles.length > 0) {
                    // 1. Populate Main Featured Article (First Article)
                    const featuredSection = document.getElementById('featured-section');
                    const mainArticle = articles[0];

                    if (mainArticle) {
                        featuredSection.classList.remove('hidden');
                        document.getElementById('featured-main-bg').src = mainArticle.image || 'https://via.placeholder.com/800x400';
                        document.getElementById('featured-main-title').innerText = mainArticle.title;
                        document.getElementById('featured-main-category').innerText = mainArticle.category || 'Tiêu điểm';

                        // Format Date
                        const date = new Date(mainArticle.createdAt || Date.now());
                        document.getElementById('featured-main-date').innerText = date.toLocaleDateString('vi-VN');

                        // Link
                        const link = `/bai-viet/${mainArticle.slug || mainArticle._id}`;
                        document.getElementById('featured-main').onclick = () => window.location.href = link;
                        document.getElementById('featured-main-link').href = link;
                    }

                    // 2. Populate Vertical Scrolling List (Next 5 Articles)
                    const scrollList = document.getElementById('featured-scroll-list');
                    const scrollArticles = articles.slice(1, 6); // Take up to 5 articles

                    if (scrollList && scrollArticles.length > 0) {
                        scrollList.innerHTML = '';

                        // Function to create article item HTML
                        const createScrollItem = (article) => `
                            <div class="flex items-start gap-3 p-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors cursor-pointer" onclick="window.location.href='/bai-viet/${article.slug || article._id}'">
                                <img src="${article.image || 'https://via.placeholder.com/100x100'}" alt="${article.title}" class="w-16 h-12 rounded object-cover shrink-0 border border-gray-200 dark:border-gray-700">
                                <div class="flex-1 min-w-0">
                                    <h4 class="text-xs font-bold text-text-main dark:text-white line-clamp-2 leading-snug group-hover:text-primary transition-colors">
                                        ${article.title}
                                    </h4>
                                    <span class="text-[10px] text-text-secondary dark:text-gray-400 mt-1 block">
                                        ${new Date(article.createdAt).toLocaleDateString('vi-VN')}
                                    </span>
                                </div>
                            </div>
                        `;

                        // Add original items
                        scrollArticles.forEach(article => {
                            scrollList.innerHTML += createScrollItem(article);
                        });

                        // Duplicate items for seamless scrolling (only if enough items)
                        if (scrollArticles.length >= 3) {
                            scrollArticles.forEach(article => {
                                scrollList.innerHTML += createScrollItem(article);
                            });
                        }
                    }

                    // 3. Populate Main News Grid (Remaining or All)
                    window.allArticles = articles;
                    window.currentArticleIndex = 0; // Reset

                    // Initial load for grid
                    loadMoreArticles();
                } else {
                    newsGrid.innerHTML = '<p class="col-span-full text-center text-gray-500">Chưa có tin tức nào.</p>';
                }
            } catch (error) {
                console.error('Error fetching articles:', error);
                newsGrid.innerHTML = '<p class="col-span-full text-center text-red-500">Không thể tải tin tức. Vui lòng thử lại sau.</p>';
            }
        });

        // Load More Articles Function (Global)
        function loadMoreArticles() {
            const newsGrid = document.getElementById('news-grid');
            const loadMoreBtn = document.getElementById('load-more-btn');
            const articlesPerLoad = 6;

            // If no articles, return
            if (!window.allArticles || window.allArticles.length === 0) return;

            // Calculate end index
            const nextIndex = window.currentArticleIndex + articlesPerLoad;
            const articlesToRender = window.allArticles.slice(window.currentArticleIndex, nextIndex);

            // If first load, clear skeleton
            if (window.currentArticleIndex === 0) {
                newsGrid.innerHTML = '';
            }

            // Render articles
            articlesToRender.forEach(article => {
                const date = new Date(article.createdAt).toLocaleDateString('vi-VN');
                const html = `
                    <article class="flex flex-col bg-surface-light dark:bg-surface-dark rounded-xl overflow-hidden border border-[#cfdbe7] dark:border-gray-800 hover:shadow-lg transition-all duration-300 group h-full">
                        <div class="relative h-48 overflow-hidden cursor-pointer" onclick="window.location.href='/bai-viet/${article.slug || article._id}'">
                            <img src="${article.image || 'https://via.placeholder.com/400x250'}" alt="${article.title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" loading="lazy">
                            <div class="absolute top-3 left-3">
                                <span class="bg-blue-100 text-primary text-xs font-bold px-2 py-1 rounded-md shadow-sm">
                                    ${article.category || 'Tin tức'}
                                </span>
                            </div>
                        </div>
                        <div class="p-5 flex flex-col flex-1">
                            <div class="flex items-center gap-2 text-xs text-text-secondary dark:text-gray-400 mb-3">
                                <span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">calendar_today</span> ${date}</span>
                            </div>
                            <h3 class="text-lg font-bold text-text-main dark:text-white mb-3 line-clamp-2 group-hover:text-primary transition-colors cursor-pointer" onclick="window.location.href='/bai-viet/${article.slug || article._id}'">
                                ${article.title}
                            </h3>
                            <p class="text-sm text-text-secondary dark:text-gray-400 line-clamp-3 mb-4 flex-1">
                                ${article.summary || ''}
                            </p>
                            <a href="/bai-viet/${article.slug || article._id}" class="inline-flex items-center gap-1 text-sm font-bold text-primary hover:gap-2 transition-all mt-auto">
                                Đọc tiếp <span class="material-symbols-outlined text-base">arrow_forward</span>
                            </a>
                        </div>
                    </article>
                `;
                newsGrid.innerHTML += html;
            });

            // Update index
            window.currentArticleIndex = nextIndex;

            // Hide button if no more articles
            if (window.currentArticleIndex >= window.allArticles.length) {
                if (loadMoreBtn) loadMoreBtn.style.display = 'none';
            } else {
                if (loadMoreBtn) loadMoreBtn.style.display = 'block';
            }
        }

        // Search function
        function searchArticles() {
            const query = document.getElementById('nav-search').value.trim();
            if (query) {
                window.location.href = '/search?q=' + encodeURIComponent(query);
            }
        }

        // ===== BACK TO TOP BUTTON FUNCTIONALITY =====
        const backToTopBtn = document.getElementById('back-to-top');

        // Show/hide button based on scroll position
        window.addEventListener('scroll', () => {
            if (window.scrollY > 400) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        });

        // Smooth scroll to top
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // ===== PAGE TRANSITION HANDLING =====
        // Add smooth transition when navigating to internal links
        document.querySelectorAll('a[href^="/"], a[href^="./"]').forEach(link => {
            link.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                // Skip external links and anchor links
                if (href.startsWith('http') || href.startsWith('#') || href.startsWith('javascript:')) return;

                e.preventDefault();
                document.body.classList.add('page-exit');

                setTimeout(() => {
                    window.location.href = href;
                }, 300);
            });
        });
    </script>

    <!-- Back to Top Button -->
    <button id="back-to-top" onclick="scrollToTop()" aria-label="Về đầu trang" title="Về đầu trang">
        <span class="material-symbols-outlined">arrow_upward</span>
    </button>

    <!-- UI Enhancements Script -->
    <script src="/public/ui-enhancements.js"></script>


    <script>
        // Ticker Logic
        function updateTickerTime() {
            const now = new Date();
            const days = ['Chủ nhật', 'Thứ hai', 'Thứ ba', 'Thứ tư', 'Thứ năm', 'Thứ sáu', 'Thứ bảy'];
            const day = days[now.getDay()];
            const date = now.toLocaleDateString('vi-VN');
            const time = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });
            const tickerTime = document.getElementById('ticker-datetime');
            if (tickerTime) tickerTime.textContent = `${day}, ${date} - ${time}`;
        }

        async function loadTickerSettings() {
            try {
                const res = await fetch('/api/settings/ticker_settings');
                if (res.ok) {
                    const data = await res.json();
                    const tickerContentContainer = document.getElementById('ticker-content-container');
                    const tickerContent = document.getElementById('ticker-content');
                    if (data.value && data.value.isEnabled) {
                        tickerContentContainer.classList.remove('hidden');
                        tickerContent.textContent = data.value.content || 'Chào mừng bạn đến với cổng thông tin điện tử của Trường Tiểu học Ít Ong';
                    } else {
                        tickerContentContainer.classList.add('hidden');
                    }
                }
            } catch (err) {
                console.error('Error loading ticker:', err);
            }
        }

        function toggleMobileSearch() {
            const searchBar = document.getElementById('mobile-search-bar');
            if (searchBar) {
                searchBar.classList.toggle('hidden');
                if (!searchBar.classList.contains('hidden')) {
                    const input = document.getElementById('nav-search-mobile');
                    if (input) input.focus();
                }
            }
        }

        // Initialize Ticker
        document.addEventListener('DOMContentLoaded', () => {
            updateTickerTime();
            setInterval(updateTickerTime, 60000);
            loadTickerSettings();
        });
    </script>

    <script>
        (function () {
            var snowflakes = [],
                browserWidth, browserHeight,
                numberOfSnowflakes = 50, // Số lượng bông tuyết
                resetPosition = false;

            function setup() {
                window.addEventListener("DOMContentLoaded", generateSnowflakes, false);
                window.addEventListener("resize", setResetFlag, false);
            }

            function setResetFlag(e) {
                resetPosition = true;
            }

            function generateSnowflakes() {

                var originalSnowflake = document.createElement("div");
                originalSnowflake.classList.add("snowflake");
                originalSnowflake.innerHTML = "❄";
                originalSnowflake.style.fontSize = "20px"; // Kích thước cơ bản

                var snowflakeContainer = document.body;

                browserWidth = document.documentElement.clientWidth;
                browserHeight = document.documentElement.clientHeight;

                for (var i = 0; i < numberOfSnowflakes; i++) {
                    var snowflakeClone = originalSnowflake.cloneNode(true);
                    snowflakeContainer.appendChild(snowflakeClone);

                    var initialX = Math.floor(Math.random() * browserWidth);
                    var fallDuration = Math.floor(Math.random() * 10) + 5 + "s";
                    var snowflakeSize = Math.floor(Math.random() * 20) + 10 + "px"; // Random kích thước
                    var delay = Math.floor(Math.random() * 5) + "s";

                    snowflakeClone.style.left = initialX + "px";
                    snowflakeClone.style.animationDuration = fallDuration;
                    snowflakeClone.style.fontSize = snowflakeSize;
                    snowflakeClone.style.animationDelay = delay;
                    snowflakeClone.style.opacity = Math.random(); // Độ mờ ngẫu nhiên
                }
            }
            setup();
        })();
    </script>
</body>

</html>